<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="version" content="v1.3" />

  <!-- ★ SEO用 description -->
  <meta name="description" content="RIDDIM INDEX（リディム・インデックス）は、AIを用いてレゲエのリディム情報を体系的に一覧化した独自のデータベースです。" />

  <!-- ★ canonical（Googleに正規URLを伝える） -->
  <link rel="canonical" href="https://italisle.jp/" />

  <!-- ★ タイトル最適化 -->
  <title>RIDDIM INDEX – レゲエ・リディム データベース</title>

  <!-- ファビコン（SVG と PNG を併用） -->
  <link rel="icon" type="image/svg+xml" href="favicon.svg" />
  <link rel="icon" type="image/png" href="favicon.png" />

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- ★ OGP（SNSカード：LINE/Twitter/Facebook/Slackなど） -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="RIDDIM INDEX" />
  <meta property="og:title" content="RIDDIM INDEX – レゲエ・リディム データベース" />
  <meta property="og:description" content="RIDDIM INDEX（リディム・インデックス）は、AIを用いてレゲエのリディム情報を体系的に一覧化した独自のデータベースです。" />
  <meta property="og:url" content="https://italisle.jp/" />

  <!-- ★ Twitterカード -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="RIDDIM INDEX – レゲエ・リディム データベース" />
  <meta name="twitter:description" content="RIDDIM INDEX（リディム・インデックス）は、AIを用いてレゲエのリディム情報を体系的に一覧化した独自のデータベースです。" />

  <!-- ★ JSON-LD：サイト内検索機能（SearchAction） -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "RIDDIM INDEX",
    "url": "https://italisle.jp/",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://italisle.jp/?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
</head>

<body class="indexPage">
  <header class="masthead container">
    <div class="mastheadInner">
      <h1 class="title">
        <a href="index.html" class="titleLink">RIDDIM INDEX</a>
        <span class="ver">v1.3</span>
      </h1>

      <!-- ▼ 右上メニューボタン -->
      <div class="pageMenuWrap">
        <button
          id="pageMenuBtn"
          class="pageMenuBtn"
          type="button"
          aria-haspopup="true"
          aria-expanded="false"
          aria-controls="pageMenu"
          aria-label="メニュー"
        >
          <span class="hamburger" aria-hidden="true"></span>
        </button>

        <!-- ▼ 背景（クリックで閉じる） -->
        <div id="menuBackdrop" class="menuBackdrop" hidden></div>

        <!-- ▼ 右スライドメニュー本体 -->
        <nav id="pageMenu" class="pageMenuDrawer" hidden aria-label="メニュー">
          <!-- ★ ヘッダー：メニュー + ✕ -->
          <div class="pageMenuHeader">
            <span class="pageMenuTitle">メニュー</span>
            <button id="menuCloseBtn" class="pageMenuClose" type="button" aria-label="メニューを閉じる">✕</button>
          </div>

          <ul class="pageMenu__list">
            <li class="pageMenu__item">
              <a href="index.html" class="pageMenu__link">インデックス</a>
            </li>
            <li class="pageMenu__item">
              <a href="ranking.html" class="pageMenu__link">ランキング</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>

    <div class="titleline"></div>

    <input
      id="q"
      class="input"
      type="search"
      autocomplete="off"
      placeholder="Search（ Riddim ／ レーベル ／ リリース年 ）"
      aria-label="全体検索"
    />
  </header>

  <section class="filters container" id="filters">
    <select id="labelSelect" aria-label="レーベルプルダウン">
      <option value="All">レーベル（ALL）</option>
    </select>
    <select id="yearSelect" aria-label="年代プルダウン">
      <option value="All">年代（ALL）</option>
    </select>

    <button
      id="filterFavorites"
      class="favFilterBtn"
      type="button"
      aria-pressed="false"
      aria-label="お気に入りのみ表示"
    >
      ★ Favorites
    </button>

    <button
      id="resetFilters"
      class="resetBtn"
      type="button"
      aria-label="検索条件をリセット"
    >
      ↻
    </button>
  </section>

  <div class="container">
    <div id="meta" class="meta"></div>
  </div>

  <section class="card container">
    <div class="columns sticky-head" role="row">
      <div id="hName"  class="col name"  role="columnheader" aria-sort="ascending">Riddim</div>
      <div id="hLabel" class="col label" role="columnheader" aria-sort="none">レーベル</div>
      <div id="hYear"  class="col year" role="columnheader" aria-sort="none">リリース年</div>
    </div>
    <div id="list" class="list" role="rowgroup"></div>
  </section>

  <!-- ▼ Supabase（index でも detail と同じプロジェクトを使う） -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    window.SUPABASE_URL = "https://vlijhkkqszwlejnywidy.supabase.co";
    window.SUPABASE_ANON_KEY = "sb_publishable_w55iXdKQ2XpFxjZA6OD2UA_aYtaSvJU";
  </script>

  <!-- ▼ 右上メニュー開閉（右スライド対応 + ✕追加） -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("pageMenuBtn");
      const menu = document.getElementById("pageMenu");
      const backdrop = document.getElementById("menuBackdrop");
      const closeBtn = document.getElementById("menuCloseBtn");
      if (!btn || !menu || !backdrop) return;

      let isOpen = false;

      const openMenu = () => {
        if (isOpen) return;
        isOpen = true;

        menu.hidden = false;
        backdrop.hidden = false;

        requestAnimationFrame(() => {
          document.body.classList.add("menu-open");
          btn.classList.add("is-open");
          btn.setAttribute("aria-expanded", "true");
        });
      };

      const closeMenu = () => {
        if (!isOpen) return;
        isOpen = false;

        document.body.classList.remove("menu-open");
        btn.classList.remove("is-open");
        btn.setAttribute("aria-expanded", "false");

        const onEnd = () => {
          if (isOpen) return;
          menu.hidden = true;
          backdrop.hidden = true;
          menu.removeEventListener("transitionend", onEnd);
        };
        menu.addEventListener("transitionend", onEnd);
      };

      const toggleMenu = () => (isOpen ? closeMenu() : openMenu());

      // ボタンクリック
      btn.addEventListener("click", (e) => {
        e.stopPropagation();
        toggleMenu();
      });

      // ✕ボタンで閉じる
      closeBtn?.addEventListener("click", closeMenu);

      // 背景クリック
      backdrop.addEventListener("click", closeMenu);

      // メニューリンク押下で閉じる
      menu.querySelectorAll(".pageMenu__link").forEach((link) => {
        link.addEventListener("click", closeMenu);
      });

      // 外側クリックで閉じる
      document.addEventListener("click", (e) => {
        if (!isOpen) return;
        if (menu.contains(e.target)) return;
        if (btn.contains(e.target)) return;
        closeMenu();
      });

      // Escで閉じる
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closeMenu();
      });
    });
  </script>

  <!-- アプリ本体 -->
  <script src="index.js"></script>

  <footer class="footerNote">
    ChatGPTによって作成しているため、情報は必ずしも正しいとは限りません。<br>
    重要な情報は確認するようにしてください。
  </footer>

  <div id="toast" class="toast"></div>
</body>
</html>
