<!DOCTYPE html>
<html lang="ja" class="detailLock">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1, viewport-fit=cover" />

  <meta name="description" content="RIDDIM INDEX のリディム詳細ページ。レゲエのリディム情報をAIで整理し詳細を閲覧できます。" />
  <meta name="robots" content="noindex,follow" />

  <title>リディム詳細 | RIDDIM INDEX – レゲエ・リディム データベース</title>

  <link rel="icon" type="image/svg+xml" href="favicon.svg" />
  <link rel="icon" type="image/png" href="favicon.png" />

  <link rel="stylesheet" href="style.css" />
</head>

<body class="detailPage">

  <header class="masthead container">
    <div class="mastheadInner">
      <h1 class="title">
        <a href="index.html" class="titleLink">RIDDIM INDEX</a>
        <span class="ver">v1.3</span>
      </h1>

      <!-- ▼ 右上メニューボタン（indexと同仕様） -->
      <div class="pageMenuWrap">
        <button
          id="pageMenuBtn"
          class="pageMenuBtn"
          type="button"
          aria-haspopup="true"
          aria-expanded="false"
          aria-controls="pageMenu"
          aria-label="メニュー"
        >
          <span class="hamburger" aria-hidden="true"></span>
        </button>

        <!-- ▼ 背景（クリックで閉じる） -->
        <div id="menuBackdrop" class="menuBackdrop" hidden></div>

        <!-- ▼ 右スライドメニュー本体 -->
        <nav id="pageMenu" class="pageMenuDrawer" hidden aria-label="メニュー">
          <div class="pageMenuHeader">
            <span class="pageMenuTitle">メニュー</span>
            <button id="menuCloseBtn" class="pageMenuClose" type="button" aria-label="メニューを閉じる">✕</button>
          </div>

          <ul class="pageMenu__list">
            <li class="pageMenu__item">
              <a href="index.html" class="pageMenu__link">インデックス</a>
            </li>
            <li class="pageMenu__item">
              <a href="ranking.html" class="pageMenu__link">ランキング</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>

    <div class="titleline"></div>
  </header>

  <!-- ▼ リディムカード -->
  <section class="card container">
    <div class="cardHead">
      <div class="cardHead__row">

        <!-- ▼ リディム名 -->
        <h2 id="riddimTitle" class="cardHead__title"></h2>

        <!-- ▼ YouTube検索ボタン（位置をリディム名の直右へ） -->
        <button
          id="ytRiddimBtn"
          class="ytBtn"
          type="button"
          aria-label="YouTubeでこのリディムを検索">
          <span class="ytIcon" aria-hidden="true"></span>
        </button>

      </div>
    </div>

    <div class="metaGrid">

      <div class="metaRow">
        <div class="metaKey">別名：</div>
        <div class="metaVal" id="aka">—</div>
      </div>

      <div class="metaRow">
        <div class="metaKey">レーベル：</div>
        <div class="metaVal" id="label">—</div>
      </div>

      <div class="metaRow">
        <div class="metaKey">リリース年：</div>
        <div class="metaVal" id="year">—</div>
      </div>

      <div class="metaRow">
        <div class="metaKey">プロデューサー：</div>
        <div class="metaVal" id="producer">—</div>
      </div>

      <!-- ▼ ☆（人数）行：ライン削除済み -->
      <div class="metaRow metaRow--fav" style="border-bottom:none;">
        <div class="metaKey"></div>
        <div class="metaVal">
          <button
            id="favDetailToggle"
            class="favToggle"
            type="button"
            aria-label="お気に入り">
            ☆
          </button>
          <span id="favCount" class="favCount">(0)</span>
        </div>
      </div>

    </div>
  </section>

  <!-- ▼ PICKUPカード -->
  <section class="card container">
    <div class="cardHead">
      <h2 class="cardHead__title">PICKUP</h2>
    </div>
    <ul id="pickup" class="songList"></ul>
  </section>

  <!-- Supabase CDN -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    window.SUPABASE_URL = "https://vlijhkkqszwlejnywidy.supabase.co";
    window.SUPABASE_ANON_KEY = "sb_publishable_w55iXdKQ2XpFxjZA6OD2UA_aYtaSvJU";
  </script>

  <!-- ▼ 右上メニュー開閉（indexと同じ） -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("pageMenuBtn");
      const menu = document.getElementById("pageMenu");
      const backdrop = document.getElementById("menuBackdrop");
      const closeBtn = document.getElementById("menuCloseBtn");
      if (!btn || !menu || !backdrop) return;

      let isOpen = false;

      const openMenu = () => {
        if (isOpen) return;
        isOpen = true;

        menu.hidden = false;
        backdrop.hidden = false;

        requestAnimationFrame(() => {
          document.body.classList.add("menu-open");
          btn.classList.add("is-open");
          btn.setAttribute("aria-expanded", "true");
        });
      };

      const closeMenu = () => {
        if (!isOpen) return;
        isOpen = false;

        document.body.classList.remove("menu-open");
        btn.classList.remove("is-open");
        btn.setAttribute("aria-expanded", "false");

        const onEnd = () => {
          if (isOpen) return;
          menu.hidden = true;
          backdrop.hidden = true;
          menu.removeEventListener("transitionend", onEnd);
        };
        menu.addEventListener("transitionend", onEnd);
      };

      const toggleMenu = () => (isOpen ? closeMenu() : openMenu());

      btn.addEventListener("click", (e) => {
        e.stopPropagation();
        toggleMenu();
      });

      closeBtn?.addEventListener("click", closeMenu);
      backdrop.addEventListener("click", closeMenu);

      menu.querySelectorAll(".pageMenu__link").forEach((link) => {
        link.addEventListener("click", closeMenu);
      });

      document.addEventListener("click", (e) => {
        if (!isOpen) return;
        if (menu.contains(e.target)) return;
        if (btn.contains(e.target)) return;
        closeMenu();
      });

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closeMenu();
      });
    });
  </script>

  <script src="detail.js"></script>

  <footer class="footerNote">
    ChatGPTによって作成しているため、情報は必ずしも正しいとは限りません。<br>
    重要な情報は確認するようにしてください。
  </footer>

  <div id="toast" class="toast"></div>

</body>
</html>
